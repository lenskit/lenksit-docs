<!DOCTYPE html>
<html class="no-js" lang="en"><!--<![endif]--><head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Crossfold preparation — LensKit 0.6.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css">
  <link rel="stylesheet" href="_static/pygments.css" type="text/css">
    <link rel="index" title="Index" href="genindex.html">
    <link rel="search" title="Search" href="search.html">
    <link rel="next" title="Batch-Running Recommenders" href="batch.html">
    <link rel="prev" title="Algorithm Interfaces" href="interfaces.html"> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://lkpy.lenskit.org/stable/crossfold.html">



<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'crossfold'
READTHEDOCS_DATA['source_suffix'] = '.rst'
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> LensKit
          

          
          </a>

          
            
            
            
              <div class="version">
                0.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs">
    <input type="hidden" name="check_keywords" value="yes">
    <input type="hidden" name="area" value="default">
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Algorithm Interfaces</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Crossfold preparation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#row-based-splitting">Row-based splitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-based-splitting">User-based splitting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#selecting-user-test-rows">Selecting user test rows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utility-classes">Utility Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Batch-Running Recommenders</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation/index.html">Evaluating Recommender Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics.html">Errors and Diagnostics</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LensKit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> »</li>
        
      <li>Crossfold preparation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/lenskit/lkpy/blob/0.6.0/doc/crossfold.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-lenskit.crossfold">
<span id="crossfold-preparation"></span><h1>Crossfold preparation<a class="headerlink" href="#module-lenskit.crossfold" title="Permalink to this headline">¶</a></h1>
<p>The LKPY <cite>crossfold</cite> module provides support for preparing data sets for
cross-validation.  Crossfold methods are implemented as functions that operate
on data frames and return generators of <cite>(train, test)</cite> pairs
(<a class="reference internal" href="#lenskit.crossfold.TTPair" title="lenskit.crossfold.TTPair"><code class="xref py py-class docutils literal notranslate"><span class="pre">lenskit.crossfold.TTPair</span></code></a> objects).  The train and test objects
in each pair are also data frames, suitable for evaluation or writing out to
a file.</p>
<p>Crossfold methods make minimal assumptions about their input data frames, so the
frames can be ratings, purchases, or whatever.  They do assume that each row
represents a single data point for the purpose of splitting and sampling.</p>
<p>Experiment code should generally use these functions to prepare train-test files
for training and evaluating algorithms.  For example, the following will perform
a user-based 5-fold cross-validation as was the default in the old LensKit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">lenskit.crossfold</span> <span class="k">as</span> <span class="nn">xf</span>
<span class="n">ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'ml-20m/ratings.csv'</span><span class="p">)</span>
<span class="n">ratings</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'userId'</span><span class="p">:</span> <span class="s1">'user'</span><span class="p">,</span> <span class="s1">'movieId'</span><span class="p">:</span> <span class="s1">'item'</span><span class="p">})</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">tp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">xf</span><span class="o">.</span><span class="n">partition_users</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">xf</span><span class="o">.</span><span class="n">SampleN</span><span class="p">(</span><span class="mi">5</span><span class="p">))):</span>
    <span class="n">tp</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">'ml-20m.exp/train-</span><span class="si">%d</span><span class="s1">.csv'</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,))</span>
    <span class="n">tp</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s1">'ml-20m.exp/train-</span><span class="si">%d</span><span class="s1">.parquet % (i,))</span>
    <span class="n">tp</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">'ml-20m.exp/test-</span><span class="si">%d</span><span class="s1">.csv'</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,))</span>
    <span class="n">tp</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s1">'ml-20m.exp/test-</span><span class="si">%d</span><span class="s1">.parquet % (i,))</span>
</pre></div>
</div>
<div class="section" id="row-based-splitting">
<h2>Row-based splitting<a class="headerlink" href="#row-based-splitting" title="Permalink to this headline">¶</a></h2>
<p>The simplest preparation methods sample or partition the rows in the input frame.
A 5-fold <a class="reference internal" href="#lenskit.crossfold.partition_rows" title="lenskit.crossfold.partition_rows"><code class="xref py py-func docutils literal notranslate"><span class="pre">partition_rows()</span></code></a> split will result in 5
splits, each of which extracts 20% of the rows for testing and leaves 80% for
training.</p>
<dl class="function">
<dt id="lenskit.crossfold.partition_rows">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">partition_rows</code><span class="sig-paren">(</span><em>data</em>, <em>partitions</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.partition_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Partition a frame of ratings or other datainto train-test partitions.  This function does not
care what kind of data is in <cite>data</cite>, so long as it is a Pandas DataFrame (or equivalent).</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> or equivalent) – a data frame containing ratings or other data you wish to partition.</li>
<li><strong>partitions</strong> (<em>integer</em>) – the number of partitions to produce</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">iterator</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an iterator of train-test pairs</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenskit.crossfold.sample_rows">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">sample_rows</code><span class="sig-paren">(</span><em>data</em>, <em>partitions</em>, <em>size</em>, <em>disjoint=True</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.sample_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample train-test a frame of ratings into train-test partitions.  This function does not care
what kind of data is in <cite>data</cite>, so long as it is a Pandas DataFrame (or equivalent).</p>
<p>We can loop over a sequence of train-test pairs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ratings</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">load_ml_ratings</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">sample_rows</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1000</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
<span class="go">1000</span>
<span class="go">1000</span>
<span class="go">1000</span>
<span class="go">1000</span>
<span class="go">1000</span>
</pre></div>
</div>
<p>Sometimes for testing, it is useful to just get a single pair:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="o">=</span> <span class="n">sample_rows</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="go">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">train</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">ratings</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.1)"><em>pandas.DataFrame</em></a>) – Data frame containing ratings or other data to partition.</li>
<li><strong>partitions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – The number of partitions to produce.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>, produce a _single_ train-test
pair instead of an iterator or list.</li>
<li><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The size of each sample.</li>
<li><strong>disjoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, force samples to be disjoint.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An iterator of train-test pairs.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">iterator</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="user-based-splitting">
<h2>User-based splitting<a class="headerlink" href="#user-based-splitting" title="Permalink to this headline">¶</a></h2>
<p>It’s often desirable to use users, instead of raw rows, as the basis for splitting
data.  This allows you to control the experimental conditions on a user-by-user basis,
e.g. by making sure each user is tested with the same number of ratings.  These methods
require that the input data frame have a <cite>user</cite> column with the user names or identifiers.</p>
<p>The algorithm used by each is as follows:</p>
<ol class="arabic simple">
<li>Sample or partition the set of user IDs into <em>n</em> sets of test users.</li>
<li>For each set of test users, select a set of that user’s rows to be test rows.</li>
<li><dl class="first docutils">
<dt>Create a training set for each test set consisting of the non-selected rows from each</dt>
<dd>of that set’s test users, along with all rows from each non-test user.</dd>
</dl>
</li>
</ol>
<dl class="function">
<dt id="lenskit.crossfold.partition_users">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">partition_users</code><span class="sig-paren">(</span><em>data</em>, <em>partitions: int</em>, <em>method: lenskit.crossfold.PartitionMethod</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.partition_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Partition a frame of ratings or other data into train-test partitions user-by-user.
This function does not care what kind of data is in <cite>data</cite>, so long as it is a Pandas DataFrame
(or equivalent) and has a <cite>user</cite> column.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> or equivalent) – a data frame containing ratings or other data you wish to partition.</li>
<li><strong>partitions</strong> (<em>integer</em>) – the number of partitions to produce</li>
<li><strong>method</strong> – The method for selecting test rows for each user.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">iterator</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an iterator of train-test pairs</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenskit.crossfold.sample_users">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">sample_users</code><span class="sig-paren">(</span><em>data</em>, <em>partitions: int</em>, <em>size: int</em>, <em>method: lenskit.crossfold.PartitionMethod</em>, <em>disjoint=True</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.sample_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Create train-test partitions by sampling users.
This function does not care what kind of data is in <cite>data</cite>, so long as it is
a Pandas DataFrame (or equivalent) and has a <cite>user</cite> column.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.1)"><em>pandas.DataFrame</em></a>) – Data frame containing ratings or other data you wish to partition.</li>
<li><strong>partitions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The number of partitions.</li>
<li><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The sample size.</li>
<li><strong>method</strong> (<a class="reference internal" href="#lenskit.crossfold.PartitionMethod" title="lenskit.crossfold.PartitionMethod"><em>PartitionMethod</em></a>) – The method for obtaining user test ratings.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An iterator of train-test pairs (as <a class="reference internal" href="#lenskit.crossfold.TTPair" title="lenskit.crossfold.TTPair"><code class="xref py py-class docutils literal notranslate"><span class="pre">TTPair</span></code></a> objects).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">iterator</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="selecting-user-test-rows">
<h3>Selecting user test rows<a class="headerlink" href="#selecting-user-test-rows" title="Permalink to this headline">¶</a></h3>
<p>These functions each take a <cite>method</cite> to decide how select each user’s test rows. The method
is a function that takes a data frame (containing just the user’s rows) and returns the
test rows.  This function is expected to preserve the index of the input data frame (which
happens by default with common means of implementing samples).</p>
<p>We provide several partition method factories:</p>
<dl class="function">
<dt id="lenskit.crossfold.SampleN">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">SampleN</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.SampleN" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly select a fixed number of test rows per user/item.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>n</strong> – The number of test items to select.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenskit.crossfold.SampleFrac">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">SampleFrac</code><span class="sig-paren">(</span><em>frac</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.SampleFrac" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly select a fraction of test rows per user/item.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>frac</strong> – the fraction of items to select for testing.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenskit.crossfold.LastN">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">LastN</code><span class="sig-paren">(</span><em>n</em>, <em>col='timestamp'</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.LastN" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a fixed number of test rows per user/item, based on ordering by a
column.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>n</strong> – The number of test items to select.</li>
<li><strong>col</strong> – The column to sort by.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenskit.crossfold.LastFrac">
<code class="descclassname">lenskit.crossfold.</code><code class="descname">LastFrac</code><span class="sig-paren">(</span><em>frac</em>, <em>col='timestamp'</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.LastFrac" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a fraction of test rows per user/item.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frac</strong> – the fraction of items to select for testing.</li>
<li><strong>col</strong> – The column to sort by.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="utility-classes">
<h2>Utility Classes<a class="headerlink" href="#utility-classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="lenskit.crossfold.PartitionMethod">
<em class="property">class </em><code class="descclassname">lenskit.crossfold.</code><code class="descname">PartitionMethod</code><a class="headerlink" href="#lenskit.crossfold.PartitionMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Partition methods select test rows for a user or item.  Partition methods
are callable; when called with a data frame, they return the test rows.</p>
<dl class="method">
<dt id="lenskit.crossfold.PartitionMethod.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>udf</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.crossfold.PartitionMethod.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Subset a data frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>udf</strong> – The input data frame of rows for a user or item.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The data frame of test rows, a subset of <cite>udf</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lenskit.crossfold.TTPair">
<em class="property">class </em><code class="descclassname">lenskit.crossfold.</code><code class="descname">TTPair</code><a class="headerlink" href="#lenskit.crossfold.TTPair" title="Permalink to this definition">¶</a></dt>
<dd><p>Train-test pair (named tuple).</p>
<dl class="attribute">
<dt id="lenskit.crossfold.TTPair.test">
<code class="descname">test</code><a class="headerlink" href="#lenskit.crossfold.TTPair.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Test data for this pair.</p>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.crossfold.TTPair.train">
<code class="descname">train</code><a class="headerlink" href="#lenskit.crossfold.TTPair.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train data for this pair.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="batch.html" class="btn btn-neutral float-right" title="Batch-Running Recommenders" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="interfaces.html" class="btn btn-neutral float-left" title="Algorithm Interfaces" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr>

  <div role="contentinfo">
    <p>
        © Copyright 2018 Boise State University
      
        <span class="commit">
          Revision <code>1634aa85</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 0.6.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/0.6.0/">0.6.0</a></dd>
        
          <dd><a href="/en/0.5.0/">0.5.0</a></dd>
        
          <dd><a href="/en/0.3.0/">0.3.0</a></dd>
        
          <dd><a href="/en/0.2.0/">0.2.0</a></dd>
        
          <dd><a href="/en/0.1.0/">0.1.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/lkpy/?fromdocs=lkpy">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/lkpy/?fromdocs=lkpy">Builds</a>
          </dd>
      </dl>
      <hr>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   


</body></html>