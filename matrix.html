

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Matrix Utilities &mdash; LensKit 0.7.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Math utilities" href="math.html" />
    <link rel="prev" title="Utility Functions" href="util.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://lkpy.readthedocs.io/en/stable/matrix.html" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'matrix'
READTHEDOCS_DATA['source_suffix'] = '.rst'
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> LensKit
          

          
          </a>

          
            
            
            
              <div class="version">
                0.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Algorithm Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="crossfold.html">Crossfold preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Batch-Running Recommenders</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation/index.html">Evaluating Recommender Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Data Set Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="util.html">Utility Functions</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Matrix Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-ratings-matrices">Building Ratings Matrices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compressed-sparse-row-matrices">Compressed Sparse Row Matrices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="util.html#module-lenskit.util">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics.html">Errors and Diagnostics</a></li>
<li class="toctree-l1"><a class="reference internal" href="impl-tips.html">Algorithm Implementation Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LensKit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="util.html">Utility Functions</a> &raquo;</li>
        
      <li>Matrix Utilities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/lenskit/lkpy/blob/0.7.0/doc/matrix.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-lenskit.matrix">
<span id="matrix-utilities"></span><h1>Matrix Utilities<a class="headerlink" href="#module-lenskit.matrix" title="Permalink to this headline">¶</a></h1>
<p>We have some matrix-related utilities, since matrices are used so heavily in recommendation
algorithms.</p>
<div class="section" id="building-ratings-matrices">
<h2>Building Ratings Matrices<a class="headerlink" href="#building-ratings-matrices" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenskit.matrix.sparse_ratings">
<code class="descclassname">lenskit.matrix.</code><code class="descname">sparse_ratings</code><span class="sig-paren">(</span><em>ratings</em>, <em>scipy=False</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.sparse_ratings" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a rating table to a sparse matrix of ratings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ratings</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><em>pandas.DataFrame</em></a>) – a data table of (user, item, rating) triples.</p></li>
<li><p><strong>scipy</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code>, return a SciPy matrix instead of <a class="reference internal" href="#lenskit.matrix.CSR" title="lenskit.matrix.CSR"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSR</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a named tuple containing the sparse matrix, user index, and item index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.matrix.RatingMatrix" title="lenskit.matrix.RatingMatrix">RatingMatrix</a></p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="lenskit.matrix.RatingMatrix">
<em class="property">class </em><code class="descclassname">lenskit.matrix.</code><code class="descname">RatingMatrix</code><a class="headerlink" href="#lenskit.matrix.RatingMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>A rating matrix with associated indices.</p>
<dl class="attribute">
<dt id="lenskit.matrix.RatingMatrix.matrix">
<code class="descname">matrix</code><a class="headerlink" href="#lenskit.matrix.RatingMatrix.matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>The rating matrix, with users on rows and items on columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.matrix.CSR" title="lenskit.matrix.CSR">CSR</a> or <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.3.0)">scipy.sparse.csr_matrix</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.RatingMatrix.users">
<code class="descname">users</code><a class="headerlink" href="#lenskit.matrix.RatingMatrix.users" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping from user IDs to row numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="(in pandas v0.24.2)">pandas.Index</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.RatingMatrix.items">
<code class="descname">items</code><a class="headerlink" href="#lenskit.matrix.RatingMatrix.items" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping from item IDs to column numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="(in pandas v0.24.2)">pandas.Index</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="compressed-sparse-row-matrices">
<h2>Compressed Sparse Row Matrices<a class="headerlink" href="#compressed-sparse-row-matrices" title="Permalink to this headline">¶</a></h2>
<p>We use CSR-format sparse matrices in quite a few places. Since SciPy’s sparse matrices are not
directly usable from Numba, we have implemented a Numba-compiled CSR representation that can
be used from accelerated algorithm implementations.</p>
<dl class="class">
<dt id="lenskit.matrix.CSR">
<em class="property">class </em><code class="descclassname">lenskit.matrix.</code><code class="descname">CSR</code><span class="sig-paren">(</span><em>nrows=None</em>, <em>ncols=None</em>, <em>nnz=None</em>, <em>ptrs=None</em>, <em>inds=None</em>, <em>vals=None</em>, <em>N=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple compressed sparse row matrix.  This is like <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.sparse.csr_matrix</span></code></a>, with
a couple of useful differences:</p>
<ul class="simple">
<li><p>It is backed by a Numba jitclass, so it can be directly used from Numba-optimized functions.</p></li>
<li><p>The value array is optional, for cases in which only the matrix structure is required.</p></li>
<li><p>The value array, if present, is always double-precision.</p></li>
</ul>
<p>You generally don’t want to create this class yourself with the constructor.  Instead, use one
of its class methods.</p>
<p>If you need to pass an instance off to a Numba-compiled function, use <a class="reference internal" href="#lenskit.matrix.CSR.N" title="lenskit.matrix.CSR.N"><code class="xref py py-attr docutils literal notranslate"><span class="pre">N</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">_some_numba_fun</span><span class="p">(</span><span class="n">csr</span><span class="o">.</span><span class="n">N</span><span class="p">)</span>
</pre></div>
</div>
<p>We use the indirection between this and the Numba jitclass so that the main CSR implementation
can be pickled, and so that we can have class and instance methods that are not compatible with
jitclass but which are useful from interpreted code.</p>
<dl class="attribute">
<dt id="lenskit.matrix.CSR.N">
<code class="descname">N</code><a class="headerlink" href="#lenskit.matrix.CSR.N" title="Permalink to this definition">¶</a></dt>
<dd><p>the Numba jitclass backing (has the same attributes and most methods).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.matrix._CSR" title="lenskit.matrix._CSR">_CSR</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.CSR.nrows">
<code class="descname">nrows</code><a class="headerlink" href="#lenskit.matrix.CSR.nrows" title="Permalink to this definition">¶</a></dt>
<dd><p>the number of rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.CSR.ncols">
<code class="descname">ncols</code><a class="headerlink" href="#lenskit.matrix.CSR.ncols" title="Permalink to this definition">¶</a></dt>
<dd><p>the number of columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.CSR.nnz">
<code class="descname">nnz</code><a class="headerlink" href="#lenskit.matrix.CSR.nnz" title="Permalink to this definition">¶</a></dt>
<dd><p>the number of entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.CSR.rowptrs">
<code class="descname">rowptrs</code><a class="headerlink" href="#lenskit.matrix.CSR.rowptrs" title="Permalink to this definition">¶</a></dt>
<dd><p>the row pointers.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.CSR.colinds">
<code class="descname">colinds</code><a class="headerlink" href="#lenskit.matrix.CSR.colinds" title="Permalink to this definition">¶</a></dt>
<dd><p>the column indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lenskit.matrix.CSR.values">
<code class="descname">values</code><a class="headerlink" href="#lenskit.matrix.CSR.values" title="Permalink to this definition">¶</a></dt>
<dd><p>the values</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="classmethod">
<dt id="lenskit.matrix.CSR.empty">
<em class="property">classmethod </em><code class="descname">empty</code><span class="sig-paren">(</span><em>shape</em>, <em>row_nnzs</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an empty CSR matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – the array shape (rows,cols)</p></li>
<li><p><strong>row_nnzs</strong> (<em>array-like</em>) – the number of nonzero entries for each row</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="classmethod">
<dt id="lenskit.matrix.CSR.from_coo">
<em class="property">classmethod </em><code class="descname">from_coo</code><span class="sig-paren">(</span><em>rows</em>, <em>cols</em>, <em>vals</em>, <em>shape=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.from_coo" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CSR matrix from data in COO format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> (<em>array-like</em>) – the row indices.</p></li>
<li><p><strong>cols</strong> (<em>array-like</em>) – the column indices.</p></li>
<li><p><strong>vals</strong> (<em>array-like</em>) – the data values; can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – the array shape, or <code class="docutils literal notranslate"><span class="pre">None</span></code> to infer from row &amp; column indices.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="classmethod">
<dt id="lenskit.matrix.CSR.from_scipy">
<em class="property">classmethod </em><code class="descname">from_scipy</code><span class="sig-paren">(</span><em>mat</em>, <em>copy=True</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.from_scipy" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a scipy sparse matrix to an internal CSR.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> (<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.spmatrix.html#scipy.sparse.spmatrix" title="(in SciPy v1.3.0)"><em>scipy.sparse.spmatrix</em></a>) – a SciPy sparse matrix.</p></li>
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – if <code class="docutils literal notranslate"><span class="pre">False</span></code>, reuse the SciPy storage if possible.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a CSR matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.matrix.CSR" title="lenskit.matrix.CSR">CSR</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.normalize_rows">
<code class="descname">normalize_rows</code><span class="sig-paren">(</span><em>normalization</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.normalize_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the rows of the matrix.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The normalization <em>ignores</em> missing values instead of treating
them as 0.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is not available from Numba.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>normalization</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <p>The normalization to perform. Can be one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'center'</span></code> - center rows about the mean</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'unit'</span></code> - convert rows to a unit vector</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The normalization values for each row.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.row">
<code class="descname">row</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.row" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a row of this matrix as a dense ndarray.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>row</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – the row index.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the row, with 0s in the place of missing values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.row_cs">
<code class="descname">row_cs</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.row_cs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the column indcies for the stored values of a row.</p>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.row_extent">
<code class="descname">row_extent</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.row_extent" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the extent of a row in the underlying column index and value arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>row</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – the row index.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">(s,</span> <span class="pre">e)</span></code>, where the row occupies positions <span class="math notranslate nohighlight">\([s, e)\)</span> in the
CSR data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.row_nnzs">
<code class="descname">row_nnzs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.row_nnzs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a vector of the number of nonzero entries in each row.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is not available from Numba.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the number of nonzero entries in each row.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.row_vs">
<code class="descname">row_vs</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.row_vs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the stored values of a row.</p>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.rowinds">
<code class="descname">rowinds</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#lenskit.matrix.CSR.rowinds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the row indices from this array.  Combined with <a class="reference internal" href="#lenskit.matrix.CSR.colinds" title="lenskit.matrix.CSR.colinds"><code class="xref py py-attr docutils literal notranslate"><span class="pre">colinds</span></code></a> and
<a class="reference internal" href="#lenskit.matrix.CSR.values" title="lenskit.matrix.CSR.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">values</span></code></a>, this can form a COO-format sparse matrix.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is not available from Numba.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.sort_values">
<code class="descname">sort_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.sort_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort CSR rows in nonincreasing order by value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is not available from Numba.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.to_scipy">
<code class="descname">to_scipy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.to_scipy" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a CSR matrix to a SciPy <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.sparse.csr_matrix</span></code></a>.  Avoids copying
if possible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>self</strong> (<a class="reference internal" href="#lenskit.matrix.CSR" title="lenskit.matrix.CSR"><em>CSR</em></a>) – A CSR matrix.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A SciPy sparse matrix with the same data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.3.0)">scipy.sparse.csr_matrix</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lenskit.matrix.CSR.transpose">
<code class="descname">transpose</code><span class="sig-paren">(</span><em>values=True</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix.CSR.transpose" title="Permalink to this definition">¶</a></dt>
<dd><p>Transpose a CSR matrix.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is not available from Numba.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>values</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – whether to include the values in the transpose.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the transpose of this matrix (or, equivalently, this matrix in CSC format).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.matrix.CSR" title="lenskit.matrix.CSR">CSR</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lenskit.matrix._CSR">
<em class="property">class </em><code class="descclassname">lenskit.matrix.</code><code class="descname">_CSR</code><span class="sig-paren">(</span><em>nrows</em>, <em>ncols</em>, <em>nnz</em>, <em>ptrs</em>, <em>inds</em>, <em>vals</em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.matrix._CSR" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal implementation class for <a class="reference internal" href="#lenskit.matrix.CSR" title="lenskit.matrix.CSR"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSR</span></code></a>. If you work with CSRs from Numba,
you will use this.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="math.html" class="btn btn-neutral float-right" title="Math utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="util.html" class="btn btn-neutral float-left" title="Utility Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018–2019 Boise State University
      
        <span class="commit">
          Revision <code>6514695d</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 0.7.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/0.7.0/">0.7.0</a></dd>
        
          <dd><a href="/en/0.6.1/">0.6.1</a></dd>
        
          <dd><a href="/en/0.6.0/">0.6.0</a></dd>
        
          <dd><a href="/en/0.5.0/">0.5.0</a></dd>
        
          <dd><a href="/en/0.3.0/">0.3.0</a></dd>
        
          <dd><a href="/en/0.2.0/">0.2.0</a></dd>
        
          <dd><a href="/en/0.1.0/">0.1.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/lkpy/?fromdocs=lkpy">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/lkpy/?fromdocs=lkpy">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>